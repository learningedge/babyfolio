<%#
# To change this template, choose Tools | Templates
# and open the template in the editor.
%>

<% if @family.nil? %>

  <h3>Seem's like you don't have any families yet. <%= link_to "Click here",new_family_path %> to create one.</h3>

<% else %>

  <h1>Family: <%= @family.name %></h1>
  <h1><%= link_to  "Edit family", edit_families_path()  %></h1>


  <h2>Children: </h2>
  <div id="children_container">
    <% @family.children.each_with_index do |child, idx|  %>
      <div class="single_kid">
        <div>
          <%= (idx+1).to_s + ") " + (child.first_name || "") + " " + (child.second_name || "")  + " " + (child.last_name || "") %>
          (<%= child.birth_date.to_date %>)
        </div>
      </div>
    </div>

    <h2>Parents: </h2>    
    <% @family.relations.where(:member_type => Relation::MEMBER_TYPE[:PARENT]).each_with_index do |relation, idx|  %>
      <%= relation.user.get_user_name  %>
      <%= "(YOU)" if relation.user.id == current_user.id  %>
      <br/>
    <% end %>

    <h2>Friends and relatives: </h2>
    <%#= @family.relations.where(:member_type => Relation::MEMBER_TYPE.select{ |key, item| item != :PARENT }).collect{ |key,value| value }) %>
    <% @family.relations.where(:member_type => Relation::MEMBER_TYPE.values.select{ |item| item != 'parent' }).each do |rel|  %>
      <%= rel.user.get_user_name  %>
    <% end %>

  <% end %>
<% end %>